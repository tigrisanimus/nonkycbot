# Infinity Grid - Optimized for Small Balance
# Grid trading with no upper limit - optimized for balances under $100
#
# HOW TO USE:
# 1. Store your API credentials securely in the OS keychain (RECOMMENDED):
#    python nonkyc_store_credentials.py --api-key "your_key" --api-secret "your_secret"
#
#    The bot will automatically load credentials from the keychain.
#    DO NOT edit api_key/api_secret below - leave them commented out!
#
# 2. Run the bot:
#    python run_infinity_grid.py examples/infinity_grid_small_balance.yml
#
# WHAT THIS BOT DOES:
# - Designed for balances under $100 total
# - Uses fewer grid levels and wider spacing for small accounts
# - Adjust base_order_size based on your actual balance

base_url: "https://api.nonkyc.io/api/v2"

# API credentials - DO NOT EDIT! Use keychain storage instead (see above)
# api_key: "${NONKYC_API_KEY}"      # Loaded from keychain automatically
# api_secret: "${NONKYC_API_SECRET}" # Loaded from keychain automatically

# Trading pair
symbol: "BTC_USDT"

# Grid configuration
step_mode: "pct"
step_pct: "0.02"                 # 2% spacing (wider for small balance)

# Order levels (fewer for small balance)
n_buy_levels: 3                  # 3 buy orders below price
initial_sell_levels: 6           # 6 sell orders above price (use more of your BTC)

# IMPORTANT: Adjust this based on YOUR balance!
# Formula: min(BTC_balance / sell_levels, USDT_balance / buy_levels / BTC_price)
# For 0.00036 BTC + $33 USDT at BTC=$90k:
#   - BTC per sell: 0.00036 / 6 = 0.00006
#   - BTC per buy: 33 / 3 / 90000 = 0.00012
#   - Use smaller: 0.00006 BTC (~$5.40 per order)
base_order_size: "0.00006"

# Exchange requirements
min_notional_quote: "1.0"        # $1 minimum
total_fee_rate: "0.002"          # 0.2% total fees
fee_buffer_pct: "0.0001"         # 0.01% buffer

# Market precision (BTC/USDT)
tick_size: "0.01"                # Price: 2 decimals ($90,000.00)
step_size: "0.00000001"          # Quantity: 8 decimals (0.00000001 BTC)

# Polling
# poll_interval_sec checks for fills; reconcile_interval_sec refreshes open orders.
# The lower of the two effectively determines fill-monitoring cadence.
# Typical values: 30-120s. Lower values detect fills faster but use more API calls.
poll_interval_sec: 60
reconcile_interval_sec: 60
balance_refresh_sec: 60

# REST API
rest_timeout_sec: 30.0
rest_retries: 3

# State file
state_path: "infinity_grid_small_state.json"

# EXPECTED BEHAVIOR:
# - Bot places 3 buy orders (~$16 USDT total)
# - Bot places 6 sell orders (~0.00036 BTC total)
# - When buy fills → places sell above
# - When sell fills → extends ladder upward + places buy back
# - Sell ladder grows infinitely as price rises!
