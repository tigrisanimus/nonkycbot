# Hybrid Triangular Arbitrage Configuration
# Combines order book trading with liquidity pool swaps for arbitrage
#
# HOW TO USE:
# 1. Store your API credentials securely in the OS keychain (RECOMMENDED):
#    python scripts/nonkyc_store_credentials.py --api-key "your_key" --api-secret "your_secret"
#
#    The bot will automatically load credentials from the keychain.
#    DO NOT edit api_key/api_secret below - leave them commented out!
#
# 2. Run the bot in monitor mode first to check for opportunities:
#    python bots/run_hybrid_arb_bot.py examples/hybrid_arb.yml
#
# 3. When ready to trade, set mode to "live" in this config
#
# WHAT THIS BOT DOES:
# - Combines order book trading with liquidity pool swaps for arbitrage
# - Monitors both order book pairs and AMM pools
# - Executes profitable cycles when opportunities arise
# - More complex than standard arbitrage due to pool slippage

# Exchange settings
base_url: "https://api.nonkyc.io/api/v2"

# API credentials - DO NOT EDIT! Use keychain storage instead (see above)
# api_key: "${NONKYC_API_KEY}"      # Loaded from keychain automatically
# api_secret: "${NONKYC_API_SECRET}" # Loaded from keychain automatically

# Bot mode: monitor, dry-run, or live
# - monitor: Only log opportunities, don't execute
# - dry-run: Simulate execution (no real trades)
# - live: Execute real trades (USE WITH CAUTION!)
mode: "monitor"

# Order book pairs to monitor
# NOTE: NonKYC uses UNDERSCORE format, not slashes!
orderbook_pairs:
  - "COSA_USDT"   # Current price: ~2.13 USDT
  - "COSA_BTC"    # Current price: ~0.000023 BTC
  - "PIRATE_USDT" # Current price: ~0.022 USDT
  - "PIRATE_BTC"  # Current price: ~0.00000024 BTC

# Liquidity pool pair (swap only, no limit orders)
# Try different formats if COSA/PIRATE doesn't work
pool_pair: "COSA_PIRATE"  # Try COSA_PIRATE or COSAPIRATE if this fails

# Base currency for cycles
base_currency: "USDT"

# Trading parameters
trade_amount: "100"  # Amount in base currency (USDT) per cycle
min_profit_pct: "0.5"  # Minimum 0.5% profit to execute
min_notional_quote: "1.0"  # Minimum order size in quote currency (e.g., $1 USDT)
poll_interval_seconds: 2.0  # Check for opportunities every 2 seconds

# Fee configuration
orderbook_fee: "0.002"  # 0.2% taker fee for limit orders
pool_fee: "0.003"      # 0.3% swap fee for liquidity pool

# REST API settings
rest_timeout_sec: 30.0
rest_retries: 3

# Logging
log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
log_file: "logs/hybrid_arb.log"


# ============================================================================
# EXAMPLE ARBITRAGE CYCLES
# ============================================================================
#
# This bot will monitor 4 possible triangular arbitrage cycles:
#
# Cycle 1: USDT → COSA (buy on orderbook)
#                → PIRATE (swap in pool)
#                → USDT (sell on orderbook)
#
# Cycle 2: USDT → PIRATE (buy on orderbook)
#                → COSA (swap in pool)
#                → USDT (sell on orderbook)
#
# Cycle 3: BTC → COSA (buy on orderbook)
#               → PIRATE (swap in pool)
#               → BTC (sell on orderbook)
#
# Cycle 4: BTC → PIRATE (buy on orderbook)
#               → COSA (swap in pool)
#               → BTC (sell on orderbook)
#
# ============================================================================
# PROFIT CALCULATION
# ============================================================================
#
# For each cycle, the bot calculates:
# 1. Orderbook leg 1: Taker fee (0.2%)
# 2. Pool swap leg: Swap fee (0.3%) + Slippage (calculated from reserves)
# 3. Orderbook leg 3: Taker fee (0.2%)
#
# Total fees: ~0.7% minimum
# Required price discrepancy: >1.2% for profitable trade
#
# Example profitable cycle:
# - Buy COSA at 0.50 USDT (2000 USDT worth = 4000 COSA)
# - Swap 4000 COSA → 2050 PIRATE in pool (effective rate 0.5125 PIRATE/COSA)
# - Sell 2050 PIRATE at 1.01 USDT (= 2070.5 USDT)
# - Net profit: 70.5 USDT (3.5% before fees, ~2.8% after fees)
#
# ============================================================================
# USAGE EXAMPLES
# ============================================================================
#
# 1. Monitor mode (recommended for first run):
#    python bots/run_hybrid_arb_bot.py examples/hybrid_arb.yml --monitor-only
#
# 2. Dry run mode (test execution logic):
#    python bots/run_hybrid_arb_bot.py examples/hybrid_arb.yml --dry-run
#
# 3. Live trading (REAL MONEY):
#    python bots/run_hybrid_arb_bot.py examples/hybrid_arb.yml
#
# ============================================================================
# SAFETY NOTES
# ============================================================================
#
# 1. START IN MONITOR MODE to validate opportunities exist
# 2. Check actual pool reserves and liquidity
# 3. Large trades will have significant slippage in pools
# 4. Order book fills may be partial (not implemented in this version)
# 5. Network latency matters - opportunities can disappear quickly
# 6. Consider gas costs / transaction fees
# 7. Test with small amounts first (change trade_amount to "10" or less)
#
# ============================================================================
